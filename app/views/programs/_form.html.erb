<%= form_for(@program, :html => {:class => 'form'}) do |f| %>
  <%= resource_error_messages!(@program) %>

  <div class='form-group'>
    <%= f.label 'Name' %>
    <%= f.text_field :name, :class => 'form-control' %>
  </div>
    <div class="form-group">
      <%= f.label :center %>
      <%= f.select :center_id, options_for_select(@centers.map {|c| [c.name, c.id]}, [@selected_center.name, @selected_center.id]), {}, :id => 'centers_select', :class => 'form-control' %>
    </div>
  <div class="form-group">
    <%= f.label :program_type %>
    <% if @program_donations.empty? %>
        <%= f.select :program_donation_id, options_for_select(['None Available']), {}, :id => 'program_donations_select', :class => 'form-control' %>
    <% else %>
        <%= f.select :program_donation_id, options_for_select(@program_donations.map {|e| [e.name, e.id]}, [@selected_program_donation.name, @selected_program_donation.id]), {}, :id => 'program_donations_select', :class => 'form-control' %>
    <% end %>
    <br/>
    <%= f.label :start_date %>
    <%= f.text_field :start_date, :class => 'form-control dateSelect' %>
  </div>
    <div class="form-group">
      <%= f.label :timings %>
      <% if @timings.empty? %>
          <%= f.select :timing_ids, options_for_select(['None Available']), {}, :multiple => true, :id => 'timings_select', :class => 'form-control' %>
      <% else %>
          <%= f.select :timing_ids,  options_for_select(@timings.map {|e| [e.name, e.id]}), {}, :multiple => true, :id => 'timings_select', :class => 'form-control' %>
      <% end %>
    </div>

    <%= f.submit 'Create', :id => 'create_button', :disabled => @disable_create_button, :class => 'btn btn-lg btn-primary' %>
<% end %>




<script type='text/javascript'>
$('.dateSelect').datepicker({dateFormat: 'd MM yy (DD)'});
</script>

<script>
    $(document).ready(function() {
        $('#centers_select').change(function() {
            $.ajax({
                url: "<%= update_program_donations_path %>",
                data: {
                    center_id : $('#centers_select').val()
                },
                dataType: "script"
            });
        });
        $('#program_donations_select').change(function() {
            $.ajax({
                url: "<%= update_program_timings_path %>",
                data: {
                    program_donation_id : $('#program_donations_select').val()
                },
                dataType: "script"
            });
        });

    });
</script>

