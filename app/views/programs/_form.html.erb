<%= form_for(@program, :html => {:class => 'form'}) do |f| %>
  <%= resource_error_messages!(@program) %>

  <div class='form-group'>
    <%= f.label 'Name' %>
    <%= f.text_field :name, :class => 'form-control' %>
  </div>
    <div class="form-group">
      <%= f.label :center %>
      <%= f.select :center_id, options_for_select(@centers.map {|c| [c.name, c.id]}, [@selected_center.name, @selected_center.id]), {}, :id => 'centers_select', :class => 'form-control' %>
    </div>
  <div class="form-group">
    <%= f.label :program_type %>
    <% if @program_donations.empty? %>
        <%= f.select :program_donation_id, options_for_select(['None Available']), {}, :id => 'program_donations_select', :class => 'form-control' %>
    <% else %>
        <%= f.select :program_donation_id, options_for_select(@program_donations.map {|e| [e.name, e.id]}, [@selected_program_donation.name, @selected_program_donation.id]), {}, :id => 'program_donations_select', :class => 'form-control' %>
    <% end %>
    <br/>
    <%= f.label :start_date %>
    <%= f.text_field :start_date, :class => 'form-control dateSelect' %>
  </div>
    <div id= "timings" class="form-group">
      <%= f.label :timings %>
      <% if @timings.empty? %>
          <%= f.select :timing_ids, options_for_select(['None Available']), {}, :multiple => true, :id => 'timings_select', :class => 'form-control' %>
      <% else %>
          <%= f.select :timing_ids,  options_for_select(@timings.map {|e| [e.name, e.id]}), {}, :multiple => true, :id => 'timings_select', :class => 'form-control' %>
      <% end %>
    </div>

    <div id="intro_timings" class="form-group">
      <%= f.label :intro_timings %>
      <% if @timings.empty? %>
          <%= f.select :intro_timing_ids, options_for_select(['None Available']), {}, :multiple => true, :id => 'intro_timings_select', :class => 'form-control' %>
      <% else %>
          <%= f.select :intro_timing_ids, options_for_select(@timings.map {|e| [e.name, e.id]}), {}, :multiple => true, :id => 'intro_timings_select', :class => 'form-control' %>
      <% end %>
    </div>

    <div id="first_day_timing" class="form-group">
      <%= f.label 'First day start timing' %>
      <% if @timings.empty? %>
          <%= f.select :first_day_timing_id, options_for_select(['None Available']), {}, :multiple => true, :id => 'first_day_timing_select', :class => 'form-control' %>
      <% else %>
          <%= f.select :first_day_timing_id, options_for_select(@timings.map {|e| [e.name, e.id]}), {}, :id => 'first_day_timing_select', :class => 'form-control' %>
      <% end %>
    </div>

    <div id="last_day_timing" class="form-group">
      <%= f.label 'Last day end timing' %>
      <% if @timings.empty? %>
          <%= f.select :last_day_timing_id, options_for_select(['None Available']), {}, :multiple => true, :id => 'first_day_timing_select', :class => 'form-control' %>
      <% else %>
          <%= f.select :last_day_timing_id, options_for_select(@timings.map {|e| [e.name, e.id]}), {}, :id => 'first_day_timing_select', :class => 'form-control' %>
      <% end %>
    </div>

    <%= f.submit 'Create', :id => 'create_button', :disabled => @disable_create_button, :class => 'btn btn-lg btn-primary' %>
<% end %>




<script type='text/javascript'>
$('.dateSelect').datepicker({dateFormat: 'd MM yy (DD)'});
</script>

<script>
    $(document).ready(function() {
        $('#centers_select').change(function() {
            $.ajax({
                url: "<%= update_program_donations_path %>",
                data: {
                    center_id : $('#centers_select').val()
                },
                dataType: "script"
            });
        });
        $('#program_donations_select').change(function() {
            $.ajax({
                url: "<%= update_program_timings_path %>",
                data: {
                    program_donation_id : $('#program_donations_select').val()
                },
                dataType: "script"
            });
        });
        <% if @hide_intro_timings %>
            $("#intro_timings").hide();
        <% else %>
            $("#intro_timings").show();
        <% end %>
        <% if @hide_first_day_timing %>
            $("#first_day_timing").hide();
        <% else %>
            $("#first_day_timing").show();
        <% end %>
        <% if @hide_last_day_timing %>
            $("#last_day_timing").hide();
        <% else %>
            $("#last_day_timing").show();
        <% end %>
        <% if @hide_timings %>
            $("#timings").hide();
        <% else %>
            $("#timings").show();
        <% end %>
    });
</script>

